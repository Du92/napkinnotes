{% extends 'base.html' %}

{% block title %}
{{ super() }}
{% endblock title %}

{% block meta_tags_in_head %}
{{ super() }}
{% from '_includes/_defaults.html' import LANDING_PAGE_TITLE, FEATURED_IMAGE, SITE_DESCRIPTION with context %}

{# Open Graph / Twitter tags #}
{% if LANDING_PAGE_TITLE %}
<meta property="og:title" content="{{ LANDING_PAGE_TITLE|e }}"/>
<meta name="twitter:title" content="{{ LANDING_PAGE_TITLE|e }}">
{% else %}
<meta property="og:title" content="{{ SITENAME|striptags|e }}"/>
<meta name="twitter:title" content="{{ SITENAME|striptags|e }}">
{% endif %}
<meta property="og:url" content="{{ SITEURL }}" />
<meta property="og:site_name" content="{{ SITENAME|striptags|e }}" />
<meta property="og:article:author" content="{{ AUTHOR }}" />
{% if FEATURED_IMAGE %}
<meta property="og:image" content="{{ FEATURED_IMAGE }}" />
<meta name="twitter:image" content="{{ FEATURED_IMAGE }}" >
{% endif %}
{% if SITE_DESCRIPTION %}
<meta property="og:description" content="{{ SITE_DESCRIPTION|e }}" />
<meta name="twitter:description" content="{{ SITE_DESCRIPTION|e }}">
{% endif %}
<meta name="keywords" content="{% for tag, _ in tags|sort %} {{ tag }}, {% endfor %}{% for category, _ in categories|sort %} {{ category }}, {% endfor %}" />


{# ============================== CSS — TEXTO CENTRADO SOBRE IMAGEN ============================== #}
<style>
:root{
  --max-width: 1200px;
  --accent: #8b0000;
  --bg-muted: #fafafa;
  --text-muted: #6b6b6b;
  --hero-min-height: 64vh;
  --hero-dark-overlay: rgba(0,0,0,0.45);
  --radius: 8px;
  --gap: 1.5rem;
}

/* Hero con imagen a full width */
.landing-hero-split {
  position: relative;
  width: 100%;
  min-height: var(--hero-min-height);
  overflow: hidden;
  color: #fff;
  display: block;
  background: #111;
}

.hero-image {
  position: absolute;
  inset: 0;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  z-index: 0;
  min-height: var(--hero-min-height);
}

.hero-image::after{
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.28);
  pointer-events: none;
  z-index: 1;
}

/* TEXTO CENTRADO SOBRE LA IMAGEN */
.hero-text {
  position: relative;
  z-index: 2;

  display: flex;
  align-items: center;
  justify-content: center;   /* centrado horizontal */

  text-align: center;        /* centrado del contenido */
  width: 100%;               /* ocupa todo el ancho */
  min-height: var(--hero-min-height);

  padding: clamp(2rem, 4vw, 4rem);
  box-sizing: border-box;

  background: linear-gradient(
      180deg,
      rgba(17,17,17,0.35),
      rgba(17,17,17,0.20)
  );
}

.hero-text .hero-inner {
  max-width: 650px;
}

/* Tipografía */
.hero-text h1 {
  margin: 0 0 0.4rem 0;
  font-size: clamp(2.1rem, 4.6vw, 3.6rem);
  line-height: 1.02;
  letter-spacing: -0.02em;
}

.hero-text .subtitle {
  margin: 0 0 1rem 0;
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: rgba(255,255,255,0.92);
}

.hero-text .meta-line {
  color: var(--text-muted);
  font-size: 0.95rem;
  margin-bottom: 1.2rem;
}

/* Botón */
.btn-hero {
  display: inline-block;
  background: rgba(0,0,0,0.35);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.9);
  padding: .55rem 1rem;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 600;
  transition: transform .18s ease, box-shadow .18s ease;
}
.btn-hero:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.35);
}

/* Contenido inferior (sin cambios) */
.landing-container {
  max-width: var(--max-width);
  margin: 2.25rem auto;
  padding: 0 1rem;
  box-sizing: border-box;
}

.landing-grid {
  display: grid;
  grid-template-columns: 1fr 340px;
  gap: var(--gap);
  align-items: start;
}

.panel {
  background: white;
  border-radius: var(--radius);
  padding: 1.1rem;
  box-shadow: 0 6px 18px rgba(20,20,20,0.03);
  color: #111;
}

.recent-list { list-style: none; padding: 0; margin: 0; }
.recent-list li { padding: .6rem 0; border-bottom: 1px solid rgba(0,0,0,0.04); }
.recent-list li:last-child { border-bottom: none; }
.recent-list a { text-decoration: none; color: inherit; font-weight: 600; display:inline-block; }
.recent-list .meta { display:block; font-size: .9rem; color: var(--text-muted); margin-top: .15rem; }

/* Responsive */
@media (max-width: 980px) {
  .landing-hero-split { min-height: 100vh; }
  .hero-image { position: relative; min-height: 100vh; }

  .hero-text {
    width: 100%;
    text-align: center;
    min-height: 40vh;
    padding: 1.5rem;
    background: linear-gradient(
        180deg,
        rgba(17,17,17,0.65),
        rgba(17,17,17,0.65)
    );
  }

  .landing-grid { grid-template-columns: 1fr; }
}

@media (prefers-reduced-motion: reduce) {
  .btn-hero { transition: none; }
  .hero-text h1 { transition: none; }
}
</style>

{% endblock meta_tags_in_head %}


{% block content %}
{% from '_includes/_defaults.html' import LANDING_PAGE_TITLE, FEATURED_IMAGE, SITE_DESCRIPTION with context %}

{% set landing_page = namespace(page=false) %}
{% for p in hidden_pages if p.slug == "landing-page-about-hidden" %}
    {% set landing_page.page = p %}
{% endfor %}

{% set hero_image = false %}
{% if landing_page.page and landing_page.page.image %}
    {% set hero_image = SITEURL ~ '/' ~ landing_page.page.image %}
{% elif FEATURED_IMAGE %}
    {% set hero_image = FEATURED_IMAGE %}
{% endif %}

{# ============================== HERO ============================== #}
<div class="landing-hero-split" role="banner" aria-label="Hero">
    <div class="hero-image"
         {% if hero_image %} style="background-image: url('{{ hero_image }}');" {% endif %}>
    </div>

    <div class="hero-text">
        <div class="hero-inner">
            {% if LANDING_PAGE_TITLE %}
              <h1>{{ LANDING_PAGE_TITLE }}</h1>
            {% else %}
              <h1>{{ SITENAME }}</h1>
            {% endif %}

            {% if landing_page.page and landing_page.page.subtitle %}
              <div class="subtitle">{{ landing_page.page.subtitle }}</div>
            {% elif SITE_DESCRIPTION %}
              <div class="subtitle">{{ SITE_DESCRIPTION }}</div>
            {% endif %}

            <a class="btn-hero" href="#about-me">Conoce más</a>
        </div>
    </div>
</div>


{# ============================== CONTENIDO PRINCIPAL ============================== #}
<div class="landing-container">
  <div class="landing-grid">

    <main>
      {% if landing_page.page %}
      <section class="panel" id="about-me">
        <h2 style="margin-top:0;">{{ landing_page.page.title }}</h2>
        <div class="article-content">
          {{ landing_page.page.content }}
        </div>
      </section>
      {% endif %}

      {% if articles %}
      {% from '_includes/_defaults.html' import RECENT_ARTICLES_COUNT, ARCHIVES_URL, CATEGORIES_URL, RECENT_ARTICLE_SUMMARY with context %}
      <section class="panel" style="margin-top: var(--gap);">
        <header style="display:flex; align-items:center; justify-content:space-between;">
          <h3 style="margin:0;">Artículos recientes</h3>
          <a href="{{ SITEURL }}/{{ ARCHIVES_URL }}" style="font-size:.95rem; color:var(--text-muted); text-decoration:none;">Ver todos</a>
        </header>

        <div style="margin-top:1rem;">
          {% for article in articles %}
            {% if loop.index0 < RECENT_ARTICLES_COUNT %}
            <article style="margin-bottom:1rem;">
              <a href="{{ SITEURL }}/{{ article.url }}"><strong>{{ article.title }}</strong></a>
              {% if article.subtitle %}<div style="font-size:.95rem; color:var(--text-muted)">{{ article.subtitle }}</div>{% endif %}
              <div style="font-size:.9rem; color:var(--text-muted); margin-top:.25rem;">
               Publicado en <a href="{{ SITEURL }}/{{ CATEGORIES_URL }}#{{ article.category.slug }}-ref">{{ article.category }}</a> • <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
              </div>
              {% if RECENT_ARTICLE_SUMMARY %}<p style="margin-top:.5rem;">{{ article.summary }}</p>{% endif %}
            </article>
            {% endif %}
          {% endfor %}
        </div>
      </section>
      {% endif %}
    </main>

    <aside>
      <div class="panel" style="margin-bottom: var(--gap);">
        <h4 style="margin:0 0 .6rem 0;">Últimos</h4>
        <ul class="recent-list">
          {% for article in articles %}
            {% if loop.index0 < 5 %}
            <li>
              <a href="{{ SITEURL }}/{{ article.url }}">{{ article.title }}</a>
              <span class="meta">{{ article.locale_date }}</span>
            </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>

      <div class="panel" style="margin-bottom: var(--gap);">
        <h4 style="margin:0 0 .6rem 0;">Participa</h4>
        <p style="margin:0;">
          ¿Tienes una pregunta tipo Fermi o quieres colaborar?
          <a href="{{ SITEURL }}/Contributing/invitation.html">Únete</a>.
        </p>
      </div>

      <div class="panel">
        <h4 style="margin:0 0 .6rem 0;">Explorar</h4>
        <p style="margin:0;">
          <a href="{{ SITEURL }}/tags.html">Tags</a> • 
          <a href="{{ SITEURL }}/categories.html">Categorías</a>
        </p>
      </div>
    </aside>

  </div>
</div>

{% endblock content %}
